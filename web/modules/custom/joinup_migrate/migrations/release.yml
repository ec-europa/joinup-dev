id: release
label: 'Release'
migration_tags:
  - release
source:
  plugin: release
  track_changes: true
process:
  id: uri
  label: title
  field_isr_creation_date: created_time
  field_isr_distribution:
    plugin: migration
    source: distribution
    migration: distribution
    no_stub: true
  field_isr_documentation: documentation
  field_isr_is_version_of:
    plugin: migration
    source: solution
    migration: solution
    no_stub: true
  field_keywords: keywords
  field_isr_language: language
  field_isr_modification_date: changed_time
  field_isr_release_notes/value: version_notes
  field_isr_release_notes/format:
    plugin: default_value
    default_value: content_editor
  field_isr_release_number: version_number
  field_spatial_coverage:
    plugin: term_reference
    source: country
    vocabulary: spatial
  # Revisit this mapping in ISAICP-3068.
  field_isr_state:
    plugin: default_value
    default_value: validated

  # Follow-up @see https://webgate.ec.europa.eu/CITnet/jira/browse/ISAICP-3068
  # field_status:
  #   plugin: static_map
  #   source: status
  #   map:
  #     11646: http://purl.org/adms/status/Completed
  #     11647: http://purl.org/adms/status/Deprecated
  #     11648: http://purl.org/adms/status/UnderDevelopment
  #     11649: http://purl.org/adms/status/Withdrawn

destination:
  plugin: entity:rdf_entity
  default_bundle: asset_release
migration_dependencies:
  required:
    - solution
