# The array of allowed conditions for the discussion workflow transitions.
# Format of array:
# @code
# [
#   <transition key> => [
#     <source state> => [
#       <role1>
#       <role2>
#       .
#       .
#     ]
#   ]
# ]
# @endcode
#
# The array is a three dimensions array. The first level is the
# transition key. Each target state is an array of allowed source
# states which in every check, is the current state of the entity.
# Finally, the source states are arrays of roles that are allowed to
# perform this action.
#
# The reverse indexing here (source states
# keyed by the target state) is to follow the state_machines module logic
# of indexing states.
transitions:
  node:discussion:post_moderated:
    validate:
      __new__:
        - authenticated
        - rdf_entity-collection-member
        - rdf_entity-collection-facilitator
        - rdf_entity-solution-facilitator
        - moderator
    update_published:
      validated:
        - owner
        - rdf_entity-collection-facilitator
        - rdf_entity-solution-facilitator
        - moderator
    request_changes:
      validated:
        - rdf_entity-collection-facilitator
        - rdf_entity-solution-facilitator
        - moderator
    report:
      validated:
        - rdf_entity-collection-facilitator
        - rdf_entity-solution-facilitator
        - moderator
    approve_report:
      needs_update:
        - rdf_entity-collection-facilitator
        - rdf_entity-solution-facilitator
        - moderator
    update_proposed:
      proposed:
        - owner
        - rdf_entity-collection-facilitator
        - rdf_entity-solution-facilitator
        - moderator
    approve_proposed:
      proposed:
        - rdf_entity-collection-facilitator
        - rdf_entity-solution-facilitator
        - moderator
    disable:
      validated:
        - rdf_entity-collection-facilitator
        - rdf_entity-solution-facilitator
        - moderator
