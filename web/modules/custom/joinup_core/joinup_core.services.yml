services:
  cache_context.joinup_core_group_owner:
    class: 'Drupal\joinup_core\Cache\Context\GroupOwnerCacheContext'
    arguments: ['@current_user', '@entity_type.manager', '@og.membership_manager', '@database', '@private_key']
    tags:
      - { name: 'cache.context'}
  joinup_core.fulfillment_guard:
    class: Drupal\joinup_core\Guard\NodeGuard
    arguments: ['@entity_type.manager', '@joinup_core.relations_manager', '@og.membership_manager', '@config.factory', '@current_user', '@joinup_core.workflow.helper']
    tags:
      - { name: state_machine.guard, group: community_content }
  joinup_core.node_workflow_access:
    class: Drupal\joinup_core\NodeWorkflowAccessControlHandler
    arguments: ['@entity_type.manager', '@og.membership_manager', '@joinup_core.relations_manager', '@current_user', '@config.factory', '@joinup_core.workflow.helper']
  joinup_core.refresh_visit_count:
    class: Drupal\joinup_core\EventSubscriber\RefreshCachedFieldsEventSubscriber
    arguments: ['@entity_type.manager', '@datetime.time', '@matomo.query_factory', '@config.factory', '@logger.factory']
    tags:
      - { name: 'event_subscriber' }
  joinup_core.relations_manager:
    class: Drupal\joinup_core\JoinupRelationManager
    arguments: ['@og.membership_manager', '@entity_type.manager']
    lazy: true
  joinup_core.workflow.helper:
    class: Drupal\joinup_core\WorkflowHelper
    arguments: ['@current_user', '@account_switcher', '@entity_field.manager', '@og.membership_manager']
  joinup_core.transfer_ownership_subscriber:
    class: Drupal\joinup_core\EventSubscriber\TransferGroupOwnershipSubscriber
    arguments: ['@current_user', '@tempstore.private']
    tags:
    - name: event_subscriber
  joinup_core.vocabulary_fixtures.helper:
    class: Drupal\joinup_core\VocabularyFixturesHelper
    arguments: ['@sparql_endpoint']
  joinup_core.requirements_helper:
    class: Drupal\joinup_core\RequirementsHelper
    arguments: ['@database', '@sparql_endpoint']
